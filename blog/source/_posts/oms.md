---
title: OMS-GATEWAY
date: 2021-11-09 21:02:40
tags: [oms]
categories:
	- 答辩
	- OMS
---

## 1. 架构
oms-api：oms协议的封装
oms-gateway：网关，服务发现，负载均衡，统一鉴权
oms应用框架：子服务框架，oms协议，服务发现协议

## 2. 容灾

#### （1）自身集群
L5访问网关，网关切换，域名
集群，多机器组成，同步子服务信息

#### （2）子服务
- 子服务信息保存在内存中
- 同步协议，同步子服务信息到其他网关机器中
- 子服务同步其他子服务信息到本地
- 网关检查子服务上报的心跳，剔除
- 客户端缓存

## 3. 路由

#### （1）就近路由
根据网关所在机房，相同地理信息的子服务
负载均衡，轮询选择IP

#### （2）指定机房路由

## 4. 鉴权
权限控制：统一鉴权中心 + 配置（白名单，人工）
客户端身份的鉴定 + 被访问服务的权限控制
网关对子服务鉴权，agent
