<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Hexo</title>
  
  
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2021-11-09T13:46:57.521Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>John Doe</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>other-trace-systems</title>
    <link href="http://example.com/2021/11/09/other-trace-systems/"/>
    <id>http://example.com/2021/11/09/other-trace-systems/</id>
    <published>2021-11-09T13:24:32.000Z</published>
    <updated>2021-11-09T13:46:57.521Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-业界其他"><a href="#1-业界其他" class="headerlink" title="1. 业界其他"></a>1. 业界其他</h2><h4 id="（1）zipkin"><a href="#（1）zipkin" class="headerlink" title="（1）zipkin"></a>（1）zipkin</h4><p>公司：Twitter</p><p>缺点：</p><ul><li>基于java开发，不支持C++</li><li>http上报，消耗性能</li><li>拦截请求，入侵强</li><li>支持trace，不支持监控告警</li></ul><h4 id="（2）鹰眼"><a href="#（2）鹰眼" class="headerlink" title="（2）鹰眼"></a>（2）鹰眼</h4><p>公司：阿里<br>特单：存储在HBASE<br>缺点：不开源</p><h4 id="（3）Pinpoint"><a href="#（3）Pinpoint" class="headerlink" title="（3）Pinpoint"></a>（3）Pinpoint</h4><p>公司：韩国</p><p>优点：</p><ul><li>字节码注入，无侵入</li><li>存储使用hbase</li></ul><p>缺点：</p><ul><li>仅支持java服务，不支持C++</li><li>不支持查询单个调用链</li><li>不兼容OpenTracing</li><li>不支持trace</li></ul><h4 id="（4）CAT"><a href="#（4）CAT" class="headerlink" title="（4）CAT"></a>（4）CAT</h4><p>公司：美团</p><p>优点：基于JAVA开发，支持多种语言</p><p>缺点：</p><ul><li>埋点，代码入侵强</li><li>文档少，资料混乱</li><li>停止维护</li></ul><h4 id="（5）Dapper"><a href="#（5）Dapper" class="headerlink" title="（5）Dapper"></a>（5）Dapper</h4><p>公司：谷歌<br>缺点：不开源</p><h4 id="（6）Opencensus"><a href="#（6）Opencensus" class="headerlink" title="（6）Opencensus"></a>（6）Opencensus</h4><p>公司：谷歌</p><p>优点：开源</p><p>缺点：</p><ul><li>无架构梳理</li><li>不支持日志</li><li>基于agent/controller，依赖重，耦合度高，灵活度低</li></ul><h4 id="（7）skywalking"><a href="#（7）skywalking" class="headerlink" title="（7）skywalking"></a>（7）skywalking</h4><p>公司：华为</p><p>优点：</p><ul><li>JAVA字节码注入，无侵入</li><li>兼容OpenTracing</li></ul><p>缺点：</p><ul><li>依赖多</li><li>不支持C++</li></ul><h4 id="（8）Jaeger"><a href="#（8）Jaeger" class="headerlink" title="（8）Jaeger"></a>（8）Jaeger</h4><p>公司：Uber</p><p>优点：</p><ul><li>支持多种语言，golang开发</li><li>兼容OpenTracing</li></ul><p>缺点：</p><ul><li>拦截请求，入侵强</li><li>支持trace，不支持监控告警</li></ul><h4 id="（9）clickhouse"><a href="#（9）clickhouse" class="headerlink" title="（9）clickhouse"></a>（9）clickhouse</h4><p>介绍：面向列的数据库管理系统，用于在线分析查询</p><p>优点</p><ul><li>开源</li><li>查询速度快</li><li>容错性高</li><li>可靠性强</li><li>扩展性高</li><li>易用性高</li><li>支持SQL，在线查询，近似计算</li></ul><p>缺点</p><ul><li>不支持事务</li><li>修改/删除支持差</li></ul><h2 id="2-公司内部"><a href="#2-公司内部" class="headerlink" title="2. 公司内部"></a>2. 公司内部</h2><h4 id="（1）-天机阁1-0"><a href="#（1）-天机阁1-0" class="headerlink" title="（1） 天机阁1.0"></a>（1） 天机阁1.0</h4><ul><li>zipkin协议 + 鹰眼架构</li><li>需要SDK和agent，外部依赖重</li><li>只有trace，无log和metric</li><li>数据延迟60s</li><li>不支持私有化</li><li>不支持多租户</li></ul><h4 id="（2）-天机阁2-0"><a href="#（2）-天机阁2-0" class="headerlink" title="（2） 天机阁2.0"></a>（2） 天机阁2.0</h4><ul><li>2020年底上线</li><li>IP相关需要自行扩展</li><li>数据不标准，需要特殊处理</li><li>安全性/主题区分需要考虑</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1-业界其他&quot;&gt;&lt;a href=&quot;#1-业界其他&quot; class=&quot;headerlink&quot; title=&quot;1. 业界其他&quot;&gt;&lt;/a&gt;1. 业界其他&lt;/h2&gt;&lt;h4 id=&quot;（1）zipkin&quot;&gt;&lt;a href=&quot;#（1）zipkin&quot; class=&quot;headerli</summary>
      
    
    
    
    <category term="答辩" scheme="http://example.com/categories/%E7%AD%94%E8%BE%A9/"/>
    
    <category term="模调" scheme="http://example.com/categories/%E7%AD%94%E8%BE%A9/%E6%A8%A1%E8%B0%83/"/>
    
    
    <category term="trace" scheme="http://example.com/tags/trace/"/>
    
    <category term="system" scheme="http://example.com/tags/system/"/>
    
  </entry>
  
  <entry>
    <title>FMHA</title>
    <link href="http://example.com/2021/11/09/FMHA/"/>
    <id>http://example.com/2021/11/09/FMHA/</id>
    <published>2021-11-09T13:24:23.000Z</published>
    <updated>2021-11-09T13:30:26.452Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-一主三备"><a href="#1-一主三备" class="headerlink" title="1. 一主三备"></a>1. 一主三备</h2><p>主：锦绣<br>备：锦绣 + 荔景 + 光明</p><h2 id="2-复制类型"><a href="#2-复制类型" class="headerlink" title="2. 复制类型"></a>2. 复制类型</h2><p>同步/半同步</p><h2 id="3-容灾"><a href="#3-容灾" class="headerlink" title="3. 容灾"></a>3. 容灾</h2><p>强容灾</p><h2 id="4-卡主修复"><a href="#4-卡主修复" class="headerlink" title="4. 卡主修复"></a>4. 卡主修复</h2><p>关闭：直接切换主备<br>开启：异步复制，容易出现单点故障，导致数据丢失</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1-一主三备&quot;&gt;&lt;a href=&quot;#1-一主三备&quot; class=&quot;headerlink&quot; title=&quot;1. 一主三备&quot;&gt;&lt;/a&gt;1. 一主三备&lt;/h2&gt;&lt;p&gt;主：锦绣&lt;br&gt;备：锦绣 + 荔景 + 光明&lt;/p&gt;
&lt;h2 id=&quot;2-复制类型&quot;&gt;&lt;a href=&quot;</summary>
      
    
    
    
    <category term="答辩" scheme="http://example.com/categories/%E7%AD%94%E8%BE%A9/"/>
    
    <category term="数据库" scheme="http://example.com/categories/%E7%AD%94%E8%BE%A9/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
    <category term="db" scheme="http://example.com/tags/db/"/>
    
  </entry>
  
  <entry>
    <title>CTSDB查询优化</title>
    <link href="http://example.com/2021/11/09/CTSDB%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96/"/>
    <id>http://example.com/2021/11/09/CTSDB%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96/</id>
    <published>2021-11-09T13:24:09.000Z</published>
    <updated>2021-11-09T13:28:33.727Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-from-size"><a href="#1-from-size" class="headerlink" title="1. from/size"></a>1. from/size</h2><p>避免分页深度</p><h2 id="2-实时聚合-》-rollup"><a href="#2-实时聚合-》-rollup" class="headerlink" title="2. 实时聚合 =》 rollup"></a>2. 实时聚合 =》 rollup</h2><p>实时聚合影响：内存占用，分桶多的数据</p><h2 id="3-排序优化"><a href="#3-排序优化" class="headerlink" title="3. 排序优化"></a>3. 排序优化</h2><ul><li>index sorting，docID和indexSorting的顺序一致</li><li>遍历 =》 提前中断</li><li>降低了写入性能</li><li>提高了查询性能<ul><li>预排序 + after key + 提前中断</li><li>数据压缩率</li></ul></li></ul><h2 id="4-查询剪枝"><a href="#4-查询剪枝" class="headerlink" title="4. 查询剪枝"></a>4. 查询剪枝</h2><p>segment，最大值最小值<br>遍历 =》 跳过</p><h2 id="5-routing"><a href="#5-routing" class="headerlink" title="5. routing"></a>5. routing</h2><p>一次聚合 + 分片级并发</p><h2 id="6-rollup"><a href="#6-rollup" class="headerlink" title="6. rollup"></a>6. rollup</h2><p>流式聚合（并发分页）<br>indexSorting（提前中断）<br>查询剪枝<br>routing（分片级并发）</p><h2 id="7-composite"><a href="#7-composite" class="headerlink" title="7. composite"></a>7. composite</h2>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1-from-size&quot;&gt;&lt;a href=&quot;#1-from-size&quot; class=&quot;headerlink&quot; title=&quot;1. from/size&quot;&gt;&lt;/a&gt;1. from/size&lt;/h2&gt;&lt;p&gt;避免分页深度&lt;/p&gt;
&lt;h2 id=&quot;2-实时聚合-》-roll</summary>
      
    
    
    
    <category term="答辩" scheme="http://example.com/categories/%E7%AD%94%E8%BE%A9/"/>
    
    <category term="大数据" scheme="http://example.com/categories/%E7%AD%94%E8%BE%A9/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
    
    <category term="ctsdb" scheme="http://example.com/tags/ctsdb/"/>
    
    <category term="search" scheme="http://example.com/tags/search/"/>
    
  </entry>
  
  <entry>
    <title>权限 &amp; 数据安全</title>
    <link href="http://example.com/2021/11/09/%E6%9D%83%E9%99%90-%E6%95%B0%E6%8D%AE%E5%AE%89%E5%85%A8/"/>
    <id>http://example.com/2021/11/09/%E6%9D%83%E9%99%90-%E6%95%B0%E6%8D%AE%E5%AE%89%E5%85%A8/</id>
    <published>2021-11-09T13:18:01.000Z</published>
    <updated>2021-11-09T13:23:52.809Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-权限"><a href="#1-权限" class="headerlink" title="1. 权限"></a>1. 权限</h2><ul><li>web：权限系统</li><li>openapi：鉴权系统 + 配置</li><li>CTSDB：用户名密码</li><li>CKV+：用户名密码</li><li>FMHA：强密码</li></ul><h2 id="2-安全"><a href="#2-安全" class="headerlink" title="2. 安全"></a>2. 安全</h2><h4 id="（1）存储安全"><a href="#（1）存储安全" class="headerlink" title="（1）存储安全"></a>（1）存储安全</h4><ul><li>kafka<ul><li>副本 + leader</li><li>加密（SSL，影响性能） + 身份验证 + 授权</li></ul></li><li>ctsdb<ul><li>副本 + 选举</li><li>密码 + VPC网络隔离</li><li>身份认证 + 用户鉴权</li></ul></li><li>FMHA<ul><li>一地三中心</li><li>密码 + 防火墙</li><li>半同步 + GTID + read_only</li></ul></li><li>ckv+<ul><li>数据同步：异步 + 强一致</li><li>数据备份：本地快照 + 冷备</li><li>副本分片：主备切换</li></ul></li></ul><h4 id="（2）信息安全"><a href="#（2）信息安全" class="headerlink" title="（2）信息安全"></a>（2）信息安全</h4><p>数据隔离：权限<br>环境：部署<br>事后审计</p><h4 id="（3）传输安全"><a href="#（3）传输安全" class="headerlink" title="（3）传输安全"></a>（3）传输安全</h4><p>kafka：加密 + SSL<br>FMHA：加密<br>CTSDB：内部TLS + 外部HTTPS<br>ckv+：无</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1-权限&quot;&gt;&lt;a href=&quot;#1-权限&quot; class=&quot;headerlink&quot; title=&quot;1. 权限&quot;&gt;&lt;/a&gt;1. 权限&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;web：权限系统&lt;/li&gt;
&lt;li&gt;openapi：鉴权系统 + 配置&lt;/li&gt;
&lt;li&gt;CTSDB：用户名</summary>
      
    
    
    
    <category term="答辩" scheme="http://example.com/categories/%E7%AD%94%E8%BE%A9/"/>
    
    <category term="安全" scheme="http://example.com/categories/%E7%AD%94%E8%BE%A9/%E5%AE%89%E5%85%A8/"/>
    
    
    <category term="auth" scheme="http://example.com/tags/auth/"/>
    
    <category term="data-safe" scheme="http://example.com/tags/data-safe/"/>
    
  </entry>
  
  <entry>
    <title>慢查询 &amp; 限流 &amp; 限频</title>
    <link href="http://example.com/2021/11/09/search/"/>
    <id>http://example.com/2021/11/09/search/</id>
    <published>2021-11-09T13:09:20.000Z</published>
    <updated>2021-11-09T13:16:26.582Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-慢查询"><a href="#1-慢查询" class="headerlink" title="1. 慢查询"></a>1. 慢查询</h2><h4 id="（1）ctsdb：30s超时"><a href="#（1）ctsdb：30s超时" class="headerlink" title="（1）ctsdb：30s超时"></a>（1）ctsdb：30s超时</h4><p>影响：CPU，内存</p><p>优化：</p><ul><li>索引，不用通配符</li><li>agg改成composite</li><li>分片数据</li><li>聚合拆分成多个，避免分桶太多</li><li>独立协调节点</li><li>routing</li><li>增加刷新间隔</li><li>配置熔断：内存限制</li></ul><h4 id="（2）fmha"><a href="#（2）fmha" class="headerlink" title="（2）fmha"></a>（2）fmha</h4><p>影响：session长期占用，cpu、内存升高，可用性降低</p><p>优化：</p><ul><li>主键</li><li>索引减少like</li><li>拆表/中间表</li><li>查询分解</li><li>limit优化</li></ul><h2 id="2-限流"><a href="#2-限流" class="headerlink" title="2. 限流"></a>2. 限流</h2><h4 id="（1）接口限流"><a href="#（1）接口限流" class="headerlink" title="（1）接口限流"></a>（1）接口限流</h4><ul><li>计数算法：简单</li><li>滑动窗口：存储空间大</li><li>漏桶算法</li><li>令牌桶：允许一定程度的并发</li></ul><h4 id="（2）数据上报限流"><a href="#（2）数据上报限流" class="headerlink" title="（2）数据上报限流"></a>（2）数据上报限流</h4><p>writer：</p><ul><li>RateLimiter，令牌桶</li><li>2w/s/线程</li></ul><p>processor：</p><ul><li>writer queue满了，熔断，蓄水池</li><li>恢复，writer queue</li><li>蓄水池，writer queue</li></ul><p>Loader：</p><ul><li>LoadQuata，数值判断大小</li><li>6w/s/线程</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1-慢查询&quot;&gt;&lt;a href=&quot;#1-慢查询&quot; class=&quot;headerlink&quot; title=&quot;1. 慢查询&quot;&gt;&lt;/a&gt;1. 慢查询&lt;/h2&gt;&lt;h4 id=&quot;（1）ctsdb：30s超时&quot;&gt;&lt;a href=&quot;#（1）ctsdb：30s超时&quot; class=&quot;he</summary>
      
    
    
    
    <category term="答辩" scheme="http://example.com/categories/%E7%AD%94%E8%BE%A9/"/>
    
    <category term="其他" scheme="http://example.com/categories/%E7%AD%94%E8%BE%A9/%E5%85%B6%E4%BB%96/"/>
    
    
    <category term="search" scheme="http://example.com/tags/search/"/>
    
    <category term="server" scheme="http://example.com/tags/server/"/>
    
  </entry>
  
  <entry>
    <title>OMS-GATEWAY</title>
    <link href="http://example.com/2021/11/09/oms/"/>
    <id>http://example.com/2021/11/09/oms/</id>
    <published>2021-11-09T13:02:40.000Z</published>
    <updated>2021-11-09T13:08:24.912Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-架构"><a href="#1-架构" class="headerlink" title="1. 架构"></a>1. 架构</h2><p>oms-api：oms协议的封装<br>oms-gateway：网关，服务发现，负载均衡，统一鉴权<br>oms应用框架：子服务框架，oms协议，服务发现协议</p><h2 id="2-容灾"><a href="#2-容灾" class="headerlink" title="2. 容灾"></a>2. 容灾</h2><h4 id="（1）自身集群"><a href="#（1）自身集群" class="headerlink" title="（1）自身集群"></a>（1）自身集群</h4><p>L5访问网关，网关切换，域名<br>集群，多机器组成，同步子服务信息</p><h4 id="（2）子服务"><a href="#（2）子服务" class="headerlink" title="（2）子服务"></a>（2）子服务</h4><ul><li>子服务信息保存在内存中</li><li>同步协议，同步子服务信息到其他网关机器中</li><li>子服务同步其他子服务信息到本地</li><li>网关检查子服务上报的心跳，剔除</li><li>客户端缓存</li></ul><h2 id="3-路由"><a href="#3-路由" class="headerlink" title="3. 路由"></a>3. 路由</h2><h4 id="（1）就近路由"><a href="#（1）就近路由" class="headerlink" title="（1）就近路由"></a>（1）就近路由</h4><p>根据网关所在机房，相同地理信息的子服务<br>负载均衡，轮询选择IP</p><h4 id="（2）指定机房路由"><a href="#（2）指定机房路由" class="headerlink" title="（2）指定机房路由"></a>（2）指定机房路由</h4><h2 id="4-鉴权"><a href="#4-鉴权" class="headerlink" title="4. 鉴权"></a>4. 鉴权</h2><p>权限控制：统一鉴权中心 + 配置（白名单，人工）<br>客户端身份的鉴定 + 被访问服务的权限控制<br>网关对子服务鉴权，agent</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1-架构&quot;&gt;&lt;a href=&quot;#1-架构&quot; class=&quot;headerlink&quot; title=&quot;1. 架构&quot;&gt;&lt;/a&gt;1. 架构&lt;/h2&gt;&lt;p&gt;oms-api：oms协议的封装&lt;br&gt;oms-gateway：网关，服务发现，负载均衡，统一鉴权&lt;br&gt;oms应用框架</summary>
      
    
    
    
    <category term="答辩" scheme="http://example.com/categories/%E7%AD%94%E8%BE%A9/"/>
    
    <category term="OMS" scheme="http://example.com/categories/%E7%AD%94%E8%BE%A9/OMS/"/>
    
    
    <category term="oms" scheme="http://example.com/tags/oms/"/>
    
  </entry>
  
  <entry>
    <title>cftologserver</title>
    <link href="http://example.com/2021/11/09/cftologserver/"/>
    <id>http://example.com/2021/11/09/cftologserver/</id>
    <published>2021-11-09T12:56:11.000Z</published>
    <updated>2021-11-09T13:02:28.279Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-模块化"><a href="#1-模块化" class="headerlink" title="1. 模块化"></a>1. 模块化</h2><h4 id="（1）五个模块"><a href="#（1）五个模块" class="headerlink" title="（1）五个模块"></a>（1）五个模块</h4><h4 id="（2）资源配置"><a href="#（2）资源配置" class="headerlink" title="（2）资源配置"></a>（2）资源配置</h4><p>kafka集群：深圳 + 上海<br>消费者：分片16<br>cacher：ThreadPoolExecutor，100个线程，2000个无界队列<br>processor：每个尾号一个线程（尾号hash % 线程数）<br>writer：1/分片 + 1/processor</p><h4 id="（3）机器说明"><a href="#（3）机器说明" class="headerlink" title="（3）机器说明"></a>（3）机器说明</h4><p>B70<br>内存：125G，16G * 8 = 128G<br>硬盘：300G<br>物理CPU：2<br>核数：12<br>逻辑CPU：48（2 * 12 *2）<br>CPU Mhz：2301.00<br>RAID：RAID1<br>网络：10GE * 2，10G以太网网络</p><h2 id="2-线程池"><a href="#2-线程池" class="headerlink" title="2. 线程池"></a>2. 线程池</h2><h4 id="（1）作用"><a href="#（1）作用" class="headerlink" title="（1）作用"></a>（1）作用</h4><p>降低资源消耗<br>提高系统运行速度<br>提高可管理性</p><h4 id="（2）使用"><a href="#（2）使用" class="headerlink" title="（2）使用"></a>（2）使用</h4><p>ThreadPoolExecutor<br>核心线程池：100<br>阻塞队列：ArrayBlockingQueue，2000<br>线程池：200<br>饱和策略：DiscardPolicy</p><h2 id="3-缓存"><a href="#3-缓存" class="headerlink" title="3. 缓存"></a>3. 缓存</h2><p>同步锁，synchronized，多线程环境，线程安全同步锁</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1-模块化&quot;&gt;&lt;a href=&quot;#1-模块化&quot; class=&quot;headerlink&quot; title=&quot;1. 模块化&quot;&gt;&lt;/a&gt;1. 模块化&lt;/h2&gt;&lt;h4 id=&quot;（1）五个模块&quot;&gt;&lt;a href=&quot;#（1）五个模块&quot; class=&quot;headerlink&quot; titl</summary>
      
    
    
    
    <category term="答辩" scheme="http://example.com/categories/%E7%AD%94%E8%BE%A9/"/>
    
    <category term="日志服务" scheme="http://example.com/categories/%E7%AD%94%E8%BE%A9/%E6%97%A5%E5%BF%97%E6%9C%8D%E5%8A%A1/"/>
    
    
    <category term="log" scheme="http://example.com/tags/log/"/>
    
  </entry>
  
  <entry>
    <title>ckv+ &amp; ckv &amp; redis</title>
    <link href="http://example.com/2021/11/09/cache/"/>
    <id>http://example.com/2021/11/09/cache/</id>
    <published>2021-11-09T12:41:16.000Z</published>
    <updated>2021-11-09T12:54:35.251Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-CKV"><a href="#1-CKV" class="headerlink" title="1. CKV+"></a>1. CKV+</h2><h4 id="（1）多数据结构"><a href="#（1）多数据结构" class="headerlink" title="（1）多数据结构"></a>（1）多数据结构</h4><p>string，list，zset等等</p><h4 id="（2）并发处理"><a href="#（2）并发处理" class="headerlink" title="（2）并发处理"></a>（2）并发处理</h4><p>单进程，多线程<br>一个分片绑定一个CPU，避免加锁</p><ul><li>网络IO，编解码，分给所有CPU</li><li>数据执行，分片ID指定的CPU</li></ul><h4 id="（3）强一致同步"><a href="#（3）强一致同步" class="headerlink" title="（3）强一致同步"></a>（3）强一致同步</h4><p>raft协议 + 冷备</p><h4 id="（4）多协议支持"><a href="#（4）多协议支持" class="headerlink" title="（4）多协议支持"></a>（4）多协议支持</h4><p>redis + memcache</p><h4 id="（5）冷热分离"><a href="#（5）冷热分离" class="headerlink" title="（5）冷热分离"></a>（5）冷热分离</h4><p>不支持</p><h4 id="（6）读写性能"><a href="#（6）读写性能" class="headerlink" title="（6）读写性能"></a>（6）读写性能</h4><p>多核，多线程<br>一个分片一个CPU，避免加锁<br>CPU对应独立的处理进程<br>网络IO和编解码，使用所有的CPU<br>数据执行，使用分片ID指定的CPU</p><h4 id="（7）限制"><a href="#（7）限制" class="headerlink" title="（7）限制"></a>（7）限制</h4><p>key，最大64k<br>value，最大32M</p><h4 id="（8）内存使用率"><a href="#（8）内存使用率" class="headerlink" title="（8）内存使用率"></a>（8）内存使用率</h4><p>多规格block + 动态分配page</p><h2 id="2-CKV"><a href="#2-CKV" class="headerlink" title="2. CKV"></a>2. CKV</h2><h4 id="（1）多数据结构-1"><a href="#（1）多数据结构-1" class="headerlink" title="（1）多数据结构"></a>（1）多数据结构</h4><p>只支持string</p><h4 id="（2）并发处理-1"><a href="#（2）并发处理-1" class="headerlink" title="（2）并发处理"></a>（2）并发处理</h4><p>多进程加锁</p><h4 id="（3）强一致同步-1"><a href="#（3）强一致同步-1" class="headerlink" title="（3）强一致同步"></a>（3）强一致同步</h4><p>不支持<br>其他同步:recover恢复中心</p><h4 id="（4）多协议支持-1"><a href="#（4）多协议支持-1" class="headerlink" title="（4）多协议支持"></a>（4）多协议支持</h4><p>memcache</p><h4 id="（5）冷热分离-1"><a href="#（5）冷热分离-1" class="headerlink" title="（5）冷热分离"></a>（5）冷热分离</h4><p>热数据系统,CMEM<br>冷数据系统，SSD</p><h4 id="（6）读写性能-1"><a href="#（6）读写性能-1" class="headerlink" title="（6）读写性能"></a>（6）读写性能</h4><p>网络IO与核心流程解耦<br>多进程<br>逻辑处理，进程间加锁（毛刺）</p><h4 id="（7）限制-1"><a href="#（7）限制-1" class="headerlink" title="（7）限制"></a>（7）限制</h4><p>key，2-10bytes<br>value，最大10M，最好小于1M</p><h4 id="（8）内存使用率-1"><a href="#（8）内存使用率-1" class="headerlink" title="（8）内存使用率"></a>（8）内存使用率</h4><p>和obj_size业务平均记录大小有关<br>业务记录大小分布越集中，碎片率越低</p><h2 id="3-Redis"><a href="#3-Redis" class="headerlink" title="3. Redis"></a>3. Redis</h2><h4 id="（1）多数据结构-2"><a href="#（1）多数据结构-2" class="headerlink" title="（1）多数据结构"></a>（1）多数据结构</h4><p>string，list，zset等等</p><h4 id="（2）并发处理-2"><a href="#（2）并发处理-2" class="headerlink" title="（2）并发处理"></a>（2）并发处理</h4><p>多线程，2020年下推出<br>网络IO多线程</p><h4 id="（3）强一致同步-2"><a href="#（3）强一致同步-2" class="headerlink" title="（3）强一致同步"></a>（3）强一致同步</h4><p>不支持，只有异步复制</p><h4 id="（4）多协议支持-2"><a href="#（4）多协议支持-2" class="headerlink" title="（4）多协议支持"></a>（4）多协议支持</h4><h4 id="（5）冷热分离-2"><a href="#（5）冷热分离-2" class="headerlink" title="（5）冷热分离"></a>（5）冷热分离</h4><p>不支持</p><h4 id="（6）读写性能-2"><a href="#（6）读写性能-2" class="headerlink" title="（6）读写性能"></a>（6）读写性能</h4><p>非阻塞IO + IO多路复用<br>单线程 + 队列技术 + hash数据结构</p><h4 id="（7）限制-2"><a href="#（7）限制-2" class="headerlink" title="（7）限制"></a>（7）限制</h4><p>value，1GB</p><h4 id="（8）内存使用率-2"><a href="#（8）内存使用率-2" class="headerlink" title="（8）内存使用率"></a>（8）内存使用率</h4><p>LRU,TTL,腾出空间</p><ul><li>过期键删除，释放空间无法充分利用</li></ul><p>分布式存储，槽机制</p><ul><li>缩短key，value长度</li><li>序列化</li><li>数据对齐</li><li>安全重启</li></ul><p>固定范围的内存块分配：小，大，巨大<br>每个范围又被划分成多个小的内存块单位</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1-CKV&quot;&gt;&lt;a href=&quot;#1-CKV&quot; class=&quot;headerlink&quot; title=&quot;1. CKV+&quot;&gt;&lt;/a&gt;1. CKV+&lt;/h2&gt;&lt;h4 id=&quot;（1）多数据结构&quot;&gt;&lt;a href=&quot;#（1）多数据结构&quot; class=&quot;headerlink&quot; </summary>
      
    
    
    
    <category term="答辩" scheme="http://example.com/categories/%E7%AD%94%E8%BE%A9/"/>
    
    <category term="缓存" scheme="http://example.com/categories/%E7%AD%94%E8%BE%A9/%E7%BC%93%E5%AD%98/"/>
    
    
    <category term="cache" scheme="http://example.com/tags/cache/"/>
    
  </entry>
  
  <entry>
    <title>flink &amp; spark &amp; storm &amp; oceanus &amp; 缓存</title>
    <link href="http://example.com/2021/11/09/stream-computing/"/>
    <id>http://example.com/2021/11/09/stream-computing/</id>
    <published>2021-11-09T12:32:37.000Z</published>
    <updated>2021-11-09T12:40:00.999Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-flink"><a href="#1-flink" class="headerlink" title="1. flink"></a>1. flink</h2><p>流式模型：原生流处理，一条一条处理<br>数据处理保证：高，有且仅有一次，检查点机制<br>容错性：中等，checkpoint，快照<br>容错开销：低，小批量数据（轻量级，不阻塞流，checkpoint异步，不影响吞吐量）<br>延时：低，一条一条处理<br>吞吐量：高，缓存块 + 超时值</p><h2 id="2-spark"><a href="#2-spark" class="headerlink" title="2. spark"></a>2. spark</h2><p>流式模型：微批处理<br>数据处理保证：高，有且仅有一次，重新计算<br>容错性：高，RDD checkpoint（弹性分布式数据集）（通过整个数据集的计算流程的血缘关系实现重建）<br>容错开销：中等（有状态计算需要额外的RDD维护状态，影响吞吐）<br>延时：中等，小批次处理<br>吞吐量：高，微批次</p><h2 id="3-storm"><a href="#3-storm" class="headerlink" title="3. storm"></a>3. storm</h2><p>流式模型：原生流处理<br>数据处理保证：中等，至少一次，重复<br>容错性：中等，上有数据备份 + ACK<br>容错开销：高，ACK（所有节点每个节点ACK一次，每条data都做ACK）<br>延时：低，一条一条处理<br>吞吐量：低，ACK，容错影响<br>易用性：低，遵循topology</p><h2 id="4-oceanus"><a href="#4-oceanus" class="headerlink" title="4. oceanus"></a>4. oceanus</h2><p>版本支持：外部最新1.13.2，内部还在1.0.9<br>特性支持：不足<br>运维：值班制度<br>其他：小bug多</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1-flink&quot;&gt;&lt;a href=&quot;#1-flink&quot; class=&quot;headerlink&quot; title=&quot;1. flink&quot;&gt;&lt;/a&gt;1. flink&lt;/h2&gt;&lt;p&gt;流式模型：原生流处理，一条一条处理&lt;br&gt;数据处理保证：高，有且仅有一次，检查点机制&lt;br&gt;容错</summary>
      
    
    
    
    <category term="答辩" scheme="http://example.com/categories/%E7%AD%94%E8%BE%A9/"/>
    
    <category term="流式计算" scheme="http://example.com/categories/%E7%AD%94%E8%BE%A9/%E6%B5%81%E5%BC%8F%E8%AE%A1%E7%AE%97/"/>
    
    
    <category term="stream-computing" scheme="http://example.com/tags/stream-computing/"/>
    
  </entry>
  
  <entry>
    <title>hermes &amp; es &amp; ces &amp; ctsdb</title>
    <link href="http://example.com/2021/11/09/hermes-es/"/>
    <id>http://example.com/2021/11/09/hermes-es/</id>
    <published>2021-11-09T12:22:30.000Z</published>
    <updated>2021-11-09T13:17:28.041Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-hermes"><a href="#1-hermes" class="headerlink" title="1. hermes"></a>1. hermes</h2><p>写入搜索性能：HDFS</p><h2 id="2-es"><a href="#2-es" class="headerlink" title="2. es"></a>2. es</h2><p>存储规模限制：集群管理成本，信息同步成本</p><p>写入搜索性能：本地磁盘</p><h2 id="3-ces"><a href="#3-ces" class="headerlink" title="3. ces"></a>3. ces</h2><p>存储规模：集群管理成本，信息同步成本</p><p>写入搜索性能：同CTSDB</p><p>特点：适合检索</p><h2 id="4-CTSDB"><a href="#4-CTSDB" class="headerlink" title="4. CTSDB"></a>4. CTSDB</h2><h4 id="（1）存储规模"><a href="#（1）存储规模" class="headerlink" title="（1）存储规模"></a>（1）存储规模</h4><p>集群大小，管理成本，集群元数据大同步慢</p><h4 id="（2）低成本存储"><a href="#（2）低成本存储" class="headerlink" title="（2）低成本存储"></a>（2）低成本存储</h4><p>编码压缩算法 + rollup + 过期时间</p><h4 id="（3）写入搜索性能"><a href="#（3）写入搜索性能" class="headerlink" title="（3）写入搜索性能"></a>（3）写入搜索性能</h4><ul><li>写入<ul><li>写入内存，之后再写入磁盘</li><li>文件裁剪优化</li></ul></li><li>查询<ul><li>缓存</li><li>倒排索引</li><li>存储模型，segment合并，按时间序分层合并</li><li>执行引擎优化，index sorting + after key + 提前中断</li><li>文件裁剪优化</li></ul></li></ul><h4 id="（4）时序特性"><a href="#（4）时序特性" class="headerlink" title="（4）时序特性"></a>（4）时序特性</h4><p>时序场景管理能力</p><ul><li>metric封装</li><li>按时间滚动生成子表</li><li>自动产生自动销毁</li><li>过期自动清理</li></ul><h4 id="（5）聚合"><a href="#（5）聚合" class="headerlink" title="（5）聚合"></a>（5）聚合</h4><p>rollup</p><ul><li>流式聚合（分页并发）</li><li>查询剪枝（segment）</li><li>index sorting（提前中断）</li><li>routing（分片级并发）</li></ul><h4 id="6-CTSDB-manager"><a href="#6-CTSDB-manager" class="headerlink" title="(6) CTSDB manager"></a>(6) CTSDB manager</h4><p>每个地域一个<br>功能：</p><ul><li>任务下发</li><li>index自动创建/删除</li><li>变配</li><li>监控</li><li>发货</li></ul><h4 id="（7）CTSDB-GATEWAY"><a href="#（7）CTSDB-GATEWAY" class="headerlink" title="（7）CTSDB-GATEWAY"></a>（7）CTSDB-GATEWAY</h4><p>VPC网络：安全性<br>VPC的VIP：负载均衡</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1-hermes&quot;&gt;&lt;a href=&quot;#1-hermes&quot; class=&quot;headerlink&quot; title=&quot;1. hermes&quot;&gt;&lt;/a&gt;1. hermes&lt;/h2&gt;&lt;p&gt;写入搜索性能：HDFS&lt;/p&gt;
&lt;h2 id=&quot;2-es&quot;&gt;&lt;a href=&quot;#2-es</summary>
      
    
    
    
    <category term="答辩" scheme="http://example.com/categories/%E7%AD%94%E8%BE%A9/"/>
    
    <category term="大数据" scheme="http://example.com/categories/%E7%AD%94%E8%BE%A9/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
    
    <category term="big-data" scheme="http://example.com/tags/big-data/"/>
    
  </entry>
  
  <entry>
    <title>TDW &amp; Hermes</title>
    <link href="http://example.com/2021/11/09/tdw-hermes/"/>
    <id>http://example.com/2021/11/09/tdw-hermes/</id>
    <published>2021-11-09T12:18:23.000Z</published>
    <updated>2021-11-09T12:21:14.943Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-经过三层存储"><a href="#1-经过三层存储" class="headerlink" title="1. 经过三层存储"></a>1. 经过三层存储</h2><h2 id="2-tdw性能差"><a href="#2-tdw性能差" class="headerlink" title="2. tdw性能差"></a>2. tdw性能差</h2><p>tdw基于hive，hdfs</p><h2 id="3-hermes性能差"><a href="#3-hermes性能差" class="headerlink" title="3. hermes性能差"></a>3. hermes性能差</h2><p>基于HDFS，比不上本地文件系统<br>tdw -&gt; hermes，LZ离线导入，提交MR任务构建索引，受资源池影响，还需要进行索引合并</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1-经过三层存储&quot;&gt;&lt;a href=&quot;#1-经过三层存储&quot; class=&quot;headerlink&quot; title=&quot;1. 经过三层存储&quot;&gt;&lt;/a&gt;1. 经过三层存储&lt;/h2&gt;&lt;h2 id=&quot;2-tdw性能差&quot;&gt;&lt;a href=&quot;#2-tdw性能差&quot; class=&quot;he</summary>
      
    
    
    
    <category term="答辩" scheme="http://example.com/categories/%E7%AD%94%E8%BE%A9/"/>
    
    <category term="大数据" scheme="http://example.com/categories/%E7%AD%94%E8%BE%A9/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
    
    <category term="big-data" scheme="http://example.com/tags/big-data/"/>
    
  </entry>
  
  <entry>
    <title>大数据处理平台对比</title>
    <link href="http://example.com/2021/11/09/big-data-compare/"/>
    <id>http://example.com/2021/11/09/big-data-compare/</id>
    <published>2021-11-09T04:51:15.000Z</published>
    <updated>2021-11-09T14:05:18.683Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-关系型数据库：mysql-postgre"><a href="#1-关系型数据库：mysql-postgre" class="headerlink" title="1. 关系型数据库：mysql + postgre"></a>1. 关系型数据库：mysql + postgre</h2><p>优点：</p><ul><li>稳定</li><li>简单</li><li>结构化数据</li></ul><p>缺点：</p><ul><li>存储成本大（时序数据压缩不佳）</li><li>维护成本高（人工分库分表）</li><li>写入吞吐低（磁盘IO + 索引建立）</li><li>查询性能差（磁盘IO + 索引建立）</li><li>聚合海量性能差（适合事务，不适合聚合）</li><li>数据规模支持小</li><li>难以横向扩展</li><li>postgre，聚合查询，容易出现性能瓶颈</li></ul><h2 id="2-非关系型数据库：mongodb"><a href="#2-非关系型数据库：mongodb" class="headerlink" title="2. 非关系型数据库：mongodb"></a>2. 非关系型数据库：mongodb</h2><p>优点</p><ul><li>查询功能强大</li><li>表结构灵活可变</li><li>删改数据方便</li><li>海量存储</li></ul><p>缺点</p><ul><li>多表查询、复杂事务等高级操作有阻碍</li><li>非分布式，难以横向扩容：集群配置，绑定分片、副本节点</li><li>字段搜索需要手动索引：B+ tree，最左优先</li><li>不适合大数据量查询：比不上ES的倒排索引（亿级）</li><li>不适合多表和复杂条件查询：创建B+树索引</li><li>不适合全文检索：字段个数有限制</li><li>不适合聚合：负责聚合通过MapReduce，速度慢</li></ul><p>和es的对比</p><ul><li>mongodb适合需要修改的数据，es适合不需要的</li><li>es查询/全文索引/聚合分析比mongodb强</li></ul><h2 id="3-druid，德鲁伊"><a href="#3-druid，德鲁伊" class="headerlink" title="3. druid，德鲁伊"></a>3. druid，德鲁伊</h2><p>介绍：分布式的，支持实时多维OLAP分析的数据处理系统<br>优点：</p><ul><li>适合聚合，快速扫描：列式存储，压缩的位图索引</li><li>可扩展的分布式系统：自我平衡，易于操作</li><li>支持数据规模大</li><li>支持实时或批量查询，秒级查询：列存压缩，位图索引，倒排索引，预聚合</li><li>基于时间的分区：提高时间数据性能</li></ul><p>缺点：</p><ul><li>支持基础的搜索，不支持全文搜索</li><li>核心功能rollup，rollup之后丢失明细数据</li><li>不适合复杂聚合</li><li>外部依赖多，部署运维麻烦</li></ul><h2 id="4-clickhouse"><a href="#4-clickhouse" class="headerlink" title="4. clickhouse"></a>4. clickhouse</h2><p>完全列式存储计算的分析性数据库，OLAP</p><p>优点</p><ul><li>数据压缩</li><li>多核并行处理，单机性能到极限</li><li>适合复杂深度聚合：merge tree</li><li>写入吞吐量大，ES 5倍以上</li><li>查询速度快，支持SQL（列式+压缩）</li><li>支持向量化计算</li><li>服务器成本低，稳定性更高</li></ul><p>缺点：</p><ul><li>分布式依赖zk，无节点发现能力，需要手动配置（和mongodb一样）</li><li>列式数据库，不支持全文检索（列式存储）</li><li>无法动态添加字段</li><li>日志无法长期保存（下线清理）</li><li>不支持高并发查询（qps 100，单次查询利用所有资源）</li></ul><h2 id="5-es"><a href="#5-es" class="headerlink" title="5. es"></a>5. es</h2><h2 id="6-hermes"><a href="#6-hermes" class="headerlink" title="6. hermes"></a>6. hermes</h2><p>大数据实时分析系统<br>海量数据实时写入和存储，低延迟查询分析的平台<br>索引的读写和分布式架构自研，底层存储基于HDFS，集群管理利用ZK</p><p>缺点</p><ul><li>写入搜索性能差一点（访问HDFS，比不上访问本地文件系统）</li><li>查询写入性能差</li></ul><p>优点</p><ul><li>数据导入可以通过kafka等直接写入/MapReduce</li><li>计算与存储分离，管理精细化，浪费更少</li><li>分片数据存储在HDFS，资源更加弹性</li><li>写入时资源消耗低，可用于索引合并的资源更多，减少小索引的数量，提高查询性能，副本异步同步</li><li>hermes将索引和数据分离存储，降低索引目录刷盘次数和目录个数，提高读写</li><li>hermes适合数据分析，es适合检索</li><li>适合更大规模的业务</li></ul><h2 id="7-hbase"><a href="#7-hbase" class="headerlink" title="7. hbase"></a>7. hbase</h2><p>基于HDFS的数据库，列式存储，无专用查询语言，NoSql数据库</p><p>优点</p><ul><li>海量数据实时查询</li><li>极强的横向扩展能力</li><li>近实时系统，支持实时查询</li><li>支持更大量的数据</li></ul><p>缺点</p><ul><li>复杂查询难以进行，列式存储</li><li>依赖多：无专用查询语言，依赖第三方</li><li>基于RowKey，RowKey设计的好坏决定了HBase使用效果</li></ul><h2 id="8-hadoop"><a href="#8-hadoop" class="headerlink" title="8. hadoop"></a>8. hadoop</h2><p>mapReduce + HDFS，hive和hbase的基础</p><p>缺点：数据延迟高（离线批处理） + 查询性能差</p><h2 id="9-hive"><a href="#9-hive" class="headerlink" title="9. hive"></a>9. hive</h2><p>hadoop数据仓库工具，分析查询引擎，用于数据分析</p><p>功能：hive将sql翻译成MapReduce，处理和计算HDFS数据<br>缺点：数据延迟高（离线批处理）<br>特点：本身不存储也不计算，存储依赖HDFS，计算依赖MapReduce</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1-关系型数据库：mysql-postgre&quot;&gt;&lt;a href=&quot;#1-关系型数据库：mysql-postgre&quot; class=&quot;headerlink&quot; title=&quot;1. 关系型数据库：mysql + postgre&quot;&gt;&lt;/a&gt;1. 关系型数据库：mysql +</summary>
      
    
    
    
    <category term="答辩" scheme="http://example.com/categories/%E7%AD%94%E8%BE%A9/"/>
    
    <category term="大数据" scheme="http://example.com/categories/%E7%AD%94%E8%BE%A9/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
    
    <category term="big-data" scheme="http://example.com/tags/big-data/"/>
    
  </entry>
  
  <entry>
    <title>hexo-operation</title>
    <link href="http://example.com/2021/11/05/hexo-operation/"/>
    <id>http://example.com/2021/11/05/hexo-operation/</id>
    <published>2021-11-05T08:54:14.000Z</published>
    <updated>2021-11-05T09:56:43.845Z</updated>
    
    <content type="html"><![CDATA[<ol><li><p>新建<br><code>hexo new &quot;file-name&quot;</code><br>新建的markdown文件在<code>source/_post/</code>目录下</p></li><li><p>生成静态网页<br><code>hexo generate</code><br>生成的静态网页在<code>public</code>目录的相应的日期下，比如2021-11-05生成，在<code>public/2021/11/05</code>文件夹下</p></li><li><p>本地启动<br><code>hexo server</code><br>启动端口为4000，可使用<code>localhost:4000</code>查看</p></li><li><p>部署<br><code>hexo deploy</code><br>网址为：huiresurgeran.github.io<br>带提交信息<code>hexo deploy -m &quot;commit messgae</code></p></li><li><p>删除<br>（1）去本地文件夹的<code>/source/_post</code>目录下删除需要删除的<code>.md</code>文件<br>（2）去本地文件夹的<code>/public</code>目录下删除这篇博客对应的文件夹（根据发布时间归档）<br>（3）重新生成并发布：generate + deploy</p></li><li><p>问题<br>博客更新时出现问题，可以进行清理并重新生成静态网页<br><code>hexo clean</code><br><code>hexo generate</code></p></li><li><p>参考内部文档<br><a class="link" href="https://km.woa.com/group/19976/articles/show/297274?kmref=search&amp;from_page=1&amp;no=2">https://km.woa.com/group/19976/articles/show/297274?kmref=search&amp;from_page=1&amp;no=2<i class="fas fa-external-link-alt"></i></a></p></li><li><p>git分支备份hexo md源码<br><a class="link" href="https://blog.csdn.net/qq_45271256/article/details/105800705?spm=1001.2101.3001.6650.1&amp;utm_medium=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~default-1.no_search_link&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~default-1.no_search_link">https://blog.csdn.net/qq_45271256/article/details/105800705?spm=1001.2101.3001.6650.1&amp;utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7Edefault-1.no_search_link&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7Edefault-1.no_search_link<i class="fas fa-external-link-alt"></i></a></p></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;ol&gt;
&lt;li&gt;&lt;p&gt;新建&lt;br&gt;&lt;code&gt;hexo new &amp;quot;file-name&amp;quot;&lt;/code&gt;&lt;br&gt;新建的markdown文件在&lt;code&gt;source/_post/&lt;/code&gt;目录下&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;生成静态网页&lt;br&gt;&lt;cod</summary>
      
    
    
    
    <category term="code-tool" scheme="http://example.com/categories/code-tool/"/>
    
    <category term="hexo" scheme="http://example.com/categories/code-tool/hexo/"/>
    
    
    <category term="hexo" scheme="http://example.com/tags/hexo/"/>
    
    <category term="tool" scheme="http://example.com/tags/tool/"/>
    
  </entry>
  
  <entry>
    <title>java-bytes</title>
    <link href="http://example.com/2021/11/05/java-bytes/"/>
    <id>http://example.com/2021/11/05/java-bytes/</id>
    <published>2021-11-05T08:52:31.000Z</published>
    <updated>2021-11-05T08:52:31.947Z</updated>
    
    
    
    
    
  </entry>
  
  <entry>
    <title>maven_setting</title>
    <link href="http://example.com/2021/03/03/maven-setting/"/>
    <id>http://example.com/2021/03/03/maven-setting/</id>
    <published>2021-03-03T06:13:15.000Z</published>
    <updated>2021-03-03T06:42:12.836Z</updated>
    
    <content type="html"><![CDATA[<ol><li>settings.xml文件用途</li></ol><ul><li>设置maven参数</li><li>包含本地仓库路径，远程仓库路径，认证信息等</li></ul><ol start="2"><li>settings.xml文件位置</li></ol><ul><li>user.home/.m2/settings.xml</li></ul><ol start="3"><li>元素</li></ol><ul><li>顶级元素<ul><li>LocalRepository: 本地仓库路径<br><code>&lt;localRepository&gt;$&#123;user.home&#125;/.m2/repository&lt;/localRepository&gt;</code></li><li>InteractiveMode: maven是否需要和用户交互获得输入<br><code>&lt;interactiveMode&gt;true&lt;/interactiveMode&gt;</code></li><li>UsePluginRegistry:</li><li>Offline: maven是否需要在离线模式下运行<br><code>&lt;offline&gt;true&lt;/offline&gt;</code></li><li>PluginGroups</li><li>Servers: 仓库账号信息<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--配置服务端的一些设置。一些设置如安全证书不应该和pom.xml一起分发。这种类型的信息应该存在于构建服务器上的settings.xml文件中。 --&gt;</span><br><span class="line">&lt;servers&gt;</span><br><span class="line">  &lt;!--服务器元素包含配置服务器时需要的信息 --&gt;</span><br><span class="line">  &lt;server&gt;</span><br><span class="line">    &lt;!--这是server的id（注意不是用户登陆的id），该id与distributionManagement中repository元素的id相匹配。 --&gt;</span><br><span class="line">    &lt;id&gt;server001&lt;&#x2F;id&gt;</span><br><span class="line">    &lt;!--鉴权用户名。鉴权用户名和鉴权密码表示服务器认证所需要的登录名和密码。 --&gt;</span><br><span class="line">    &lt;username&gt;my_login&lt;&#x2F;username&gt;</span><br><span class="line">    &lt;!--鉴权密码 。鉴权用户名和鉴权密码表示服务器认证所需要的登录名和密码。密码加密功能已被添加到2.1.0 +。详情请访问密码加密页面 --&gt;</span><br><span class="line">    &lt;password&gt;my_password&lt;&#x2F;password&gt;</span><br><span class="line">    &lt;!--鉴权时使用的私钥位置。和前两个元素类似，私钥位置和私钥密码指定了一个私钥的路径（默认是$&#123;user.home&#125;&#x2F;.ssh&#x2F;id_dsa）以及如果需要的话，一个密语。将来passphrase和password元素可能会被提取到外部，但目前它们必须在settings.xml文件以纯文本的形式声明。 --&gt;</span><br><span class="line">    &lt;privateKey&gt;$&#123;usr.home&#125;&#x2F;.ssh&#x2F;id_dsa&lt;&#x2F;privateKey&gt;</span><br><span class="line">    &lt;!--鉴权时使用的私钥密码。 --&gt;</span><br><span class="line">    &lt;passphrase&gt;some_passphrase&lt;&#x2F;passphrase&gt;</span><br><span class="line">    &lt;!--文件被创建时的权限。如果在部署的时候会创建一个仓库文件或者目录，这时候就可以使用权限（permission）。这两个元素合法的值是一个三位数字，其对应了unix文件系统的权限，如664，或者775。 --&gt;</span><br><span class="line">    &lt;filePermissions&gt;664&lt;&#x2F;filePermissions&gt;</span><br><span class="line">    &lt;!--目录被创建时的权限。 --&gt;</span><br><span class="line">    &lt;directoryPermissions&gt;775&lt;&#x2F;directoryPermissions&gt;</span><br><span class="line">  &lt;&#x2F;server&gt;</span><br><span class="line">&lt;&#x2F;servers&gt;</span><br></pre></td></tr></table></figure></li><li>Mirrors: 仓库列表的下载镜像列表<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;mirrors&gt;</span><br><span class="line">  &lt;!-- 给定仓库的下载镜像。 --&gt;</span><br><span class="line">  &lt;mirror&gt;</span><br><span class="line">    &lt;!-- 该镜像的唯一标识符。id用来区分不同的mirror元素。 --&gt;</span><br><span class="line">    &lt;id&gt;planetmirror.com&lt;&#x2F;id&gt;</span><br><span class="line">    &lt;!-- 镜像名称 --&gt;</span><br><span class="line">    &lt;name&gt;PlanetMirror Australia&lt;&#x2F;name&gt;</span><br><span class="line">    &lt;!-- 该镜像的URL。构建系统会优先考虑使用该URL，而非使用默认的服务器URL。 --&gt;</span><br><span class="line">    &lt;url&gt;http:&#x2F;&#x2F;downloads.planetmirror.com&#x2F;pub&#x2F;maven2&lt;&#x2F;url&gt;</span><br><span class="line">    &lt;!-- 被镜像的服务器的id。例如，如果我们要设置了一个Maven中央仓库（http:&#x2F;&#x2F;repo.maven.apache.org&#x2F;maven2&#x2F;）的镜像，就需要将该元素设置成central。这必须和中央仓库的id central完全一致。 --&gt;</span><br><span class="line">    &lt;mirrorOf&gt;central&lt;&#x2F;mirrorOf&gt;</span><br><span class="line">  &lt;&#x2F;mirror&gt;</span><br><span class="line">&lt;&#x2F;mirrors&gt;</span><br></pre></td></tr></table></figure></li><li>Proxies: 代理<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;proxies&gt;</span><br><span class="line">  &lt;!--代理元素包含配置代理时需要的信息 --&gt;</span><br><span class="line">  &lt;proxy&gt;</span><br><span class="line">    &lt;!--代理的唯一定义符，用来区分不同的代理元素。 --&gt;</span><br><span class="line">    &lt;id&gt;myproxy&lt;&#x2F;id&gt;</span><br><span class="line">    &lt;!--该代理是否是激活的那个。true则激活代理。当我们声明了一组代理，而某个时候只需要激活一个代理的时候，该元素就可以派上用处。 --&gt;</span><br><span class="line">    &lt;active&gt;true&lt;&#x2F;active&gt;</span><br><span class="line">    &lt;!--代理的协议。 协议:&#x2F;&#x2F;主机名:端口，分隔成离散的元素以方便配置。 --&gt;</span><br><span class="line">    &lt;protocol&gt;http&lt;&#x2F;protocol&gt;</span><br><span class="line">    &lt;!--代理的主机名。协议:&#x2F;&#x2F;主机名:端口，分隔成离散的元素以方便配置。 --&gt;</span><br><span class="line">    &lt;host&gt;proxy.somewhere.com&lt;&#x2F;host&gt;</span><br><span class="line">    &lt;!--代理的端口。协议:&#x2F;&#x2F;主机名:端口，分隔成离散的元素以方便配置。 --&gt;</span><br><span class="line">    &lt;port&gt;8080&lt;&#x2F;port&gt;</span><br><span class="line">    &lt;!--代理的用户名，用户名和密码表示代理服务器认证的登录名和密码。 --&gt;</span><br><span class="line">    &lt;username&gt;proxyuser&lt;&#x2F;username&gt;</span><br><span class="line">    &lt;!--代理的密码，用户名和密码表示代理服务器认证的登录名和密码。 --&gt;</span><br><span class="line">    &lt;password&gt;somepassword&lt;&#x2F;password&gt;</span><br><span class="line">    &lt;!--不该被代理的主机名列表。该列表的分隔符由代理服务器指定；例子中使用了竖线分隔符，使用逗号分隔也很常见。 --&gt;</span><br><span class="line">    &lt;nonProxyHosts&gt;*.google.com|ibiblio.org&lt;&#x2F;nonProxyHosts&gt;</span><br><span class="line">  &lt;&#x2F;proxy&gt;</span><br><span class="line">&lt;&#x2F;proxies&gt;</span><br></pre></td></tr></table></figure></li><li>Profiles: 根据环境参数调整构建配置的列表<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;profiles&gt;</span><br><span class="line">  &lt;profile&gt;</span><br><span class="line">    &lt;!-- profile的唯一标识 --&gt;</span><br><span class="line">    &lt;id&gt;test&lt;&#x2F;id&gt;</span><br><span class="line">    &lt;!-- 自动触发profile的条件逻辑 --&gt;</span><br><span class="line">    &lt;activation &#x2F;&gt;</span><br><span class="line">    &lt;!-- 扩展属性列表 --&gt;</span><br><span class="line">    &lt;properties &#x2F;&gt;</span><br><span class="line">    &lt;!-- 远程仓库列表 --&gt;</span><br><span class="line">    &lt;repositories &#x2F;&gt;</span><br><span class="line">    &lt;!-- 插件仓库列表 --&gt;</span><br><span class="line">    &lt;pluginRepositories &#x2F;&gt;</span><br><span class="line">  &lt;&#x2F;profile&gt;</span><br><span class="line">&lt;&#x2F;profiles&gt;</span><br></pre></td></tr></table></figure><ul><li>activation: 自动触发profile的条件逻辑</li><li>properties: 扩展属性列表，可以用${X}来使用</li><li>repositories: 远程仓库列表<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;repositories&gt;</span><br><span class="line">  &lt;!--包含需要连接到远程仓库的信息 --&gt;</span><br><span class="line">  &lt;repository&gt;</span><br><span class="line">    &lt;!--远程仓库唯一标识 --&gt;</span><br><span class="line">    &lt;id&gt;codehausSnapshots&lt;&#x2F;id&gt;</span><br><span class="line">    &lt;!--远程仓库名称 --&gt;</span><br><span class="line">    &lt;name&gt;Codehaus Snapshots&lt;&#x2F;name&gt;</span><br><span class="line">    &lt;!--如何处理远程仓库里发布版本的下载 --&gt;</span><br><span class="line">    &lt;releases&gt;</span><br><span class="line">      &lt;!--true或者false表示该仓库是否为下载某种类型构件（发布版，快照版）开启。 --&gt;</span><br><span class="line">      &lt;enabled&gt;false&lt;&#x2F;enabled&gt;</span><br><span class="line">      &lt;!--该元素指定更新发生的频率。Maven会比较本地POM和远程POM的时间戳。这里的选项是：always（一直），daily（默认，每日），interval：X（这里X是以分钟为单位的时间间隔），或者never（从不）。 --&gt;</span><br><span class="line">      &lt;updatePolicy&gt;always&lt;&#x2F;updatePolicy&gt;</span><br><span class="line">      &lt;!--当Maven验证构件校验文件失败时该怎么做-ignore（忽略），fail（失败），或者warn（警告）。 --&gt;</span><br><span class="line">      &lt;checksumPolicy&gt;warn&lt;&#x2F;checksumPolicy&gt;</span><br><span class="line">    &lt;&#x2F;releases&gt;</span><br><span class="line">    &lt;!--如何处理远程仓库里快照版本的下载。有了releases和snapshots这两组配置，POM就可以在每个单独的仓库中，为每种类型的构件采取不同的策略。例如，可能有人会决定只为开发目的开启对快照版本下载的支持。参见repositories&#x2F;repository&#x2F;releases元素 --&gt;</span><br><span class="line">    &lt;snapshots&gt;</span><br><span class="line">      &lt;enabled &#x2F;&gt;</span><br><span class="line">      &lt;updatePolicy &#x2F;&gt;</span><br><span class="line">      &lt;checksumPolicy &#x2F;&gt;</span><br><span class="line">    &lt;&#x2F;snapshots&gt;</span><br><span class="line">    &lt;!--远程仓库URL，按protocol:&#x2F;&#x2F;hostname&#x2F;path形式 --&gt;</span><br><span class="line">    &lt;url&gt;http:&#x2F;&#x2F;snapshots.maven.codehaus.org&#x2F;maven2&lt;&#x2F;url&gt;</span><br><span class="line">    &lt;!--用于定位和排序构件的仓库布局类型-可以是default（默认）或者legacy（遗留）。Maven 2为其仓库提供了一个默认的布局；然而，Maven 1.x有一种不同的布局。我们可以使用该元素指定布局是default（默认）还是legacy（遗留）。 --&gt;</span><br><span class="line">    &lt;layout&gt;default&lt;&#x2F;layout&gt;</span><br><span class="line">  &lt;&#x2F;repository&gt;</span><br><span class="line">&lt;&#x2F;repositories&gt;</span><br></pre></td></tr></table></figure></li><li>pluginRepositories: 发现插件的远程仓库列表</li></ul></li><li>activeProfiles: 手动激活profiles的列表<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">  &lt;!-- 要激活的profile id --&gt;</span><br><span class="line">  &lt;activeProfile&gt;env-test&lt;&#x2F;activeProfile&gt;</span><br><span class="line">&lt;&#x2F;activeProfiles&gt;</span><br></pre></td></tr></table></figure></li></ul></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;ol&gt;
&lt;li&gt;settings.xml文件用途&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;设置maven参数&lt;/li&gt;
&lt;li&gt;包含本地仓库路径，远程仓库路径，认证信息等&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&quot;2&quot;&gt;
&lt;li&gt;settings.xml文件位置&lt;/li&gt;
&lt;</summary>
      
    
    
    
    <category term="java" scheme="http://example.com/categories/java/"/>
    
    
    <category term="java" scheme="http://example.com/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>电影计划</title>
    <link href="http://example.com/2021/03/01/movie/"/>
    <id>http://example.com/2021/03/01/movie/</id>
    <published>2021-03-01T02:14:58.000Z</published>
    <updated>2021-03-01T02:26:57.255Z</updated>
    
    <content type="html"><![CDATA[<ol><li>2020</li></ol><ul><li>变身特工</li><li>八佰</li><li>急先锋</li><li>花木兰</li><li>小妇人</li><li>假面饭店</li><li>妙先生</li><li>金刚川</li><li>除暴</li><li>紧急救援</li><li>沐浴之王</li><li>晴雅集</li><li>疯狂原始人2</li><li>神奇女侠1984</li><li>一秒钟</li><li>数码宝贝：最后的进化</li><li>喜宝</li><li>温暖的抱抱</li><li>风平浪静</li><li>哆啦A梦：大雄的新恐龙</li><li>月半爱丽丝</li><li>隐形人海兽之子</li><li>宝可梦：超梦的逆袭进化</li><li>气球</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;ol&gt;
&lt;li&gt;2020&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;变身特工&lt;/li&gt;
&lt;li&gt;八佰&lt;/li&gt;
&lt;li&gt;急先锋&lt;/li&gt;
&lt;li&gt;花木兰&lt;/li&gt;
&lt;li&gt;小妇人&lt;/li&gt;
&lt;li&gt;假面饭店&lt;/li&gt;
&lt;li&gt;妙先生&lt;/li&gt;
&lt;li&gt;金刚川&lt;/li&gt;
&lt;li&gt;除</summary>
      
    
    
    
    <category term="电影" scheme="http://example.com/categories/%E7%94%B5%E5%BD%B1/"/>
    
    
    <category term="movie" scheme="http://example.com/tags/movie/"/>
    
  </entry>
  
  <entry>
    <title>test</title>
    <link href="http://example.com/2021/02/26/test/"/>
    <id>http://example.com/2021/02/26/test/</id>
    <published>2021-02-26T08:57:03.000Z</published>
    <updated>2021-02-26T08:57:03.632Z</updated>
    
    
    
    
    
  </entry>
  
  <entry>
    <title>api-doc</title>
    <link href="http://example.com/2021/02/26/api-doc/"/>
    <id>http://example.com/2021/02/26/api-doc/</id>
    <published>2021-02-26T07:14:51.000Z</published>
    <updated>2021-02-26T07:21:19.526Z</updated>
    
    <content type="html"><![CDATA[<p>生成文档: <code>apidoc -i src -o dest</code></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;生成文档: &lt;code&gt;apidoc -i src -o dest&lt;/code&gt;&lt;/p&gt;
</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>神盾对账延迟故障复盘</title>
    <link href="http://example.com/2021/02/25/safe_delay/"/>
    <id>http://example.com/2021/02/25/safe_delay/</id>
    <published>2021-02-25T12:49:22.000Z</published>
    <updated>2021-03-25T11:53:08.445Z</updated>
    
    <content type="html"><![CDATA[<p>2.19 开始有业务反馈神盾出现延迟(shuangchen)<br><img src="/2021/02/25/safe_delay/shuangchen_1.jpg"></p><p>初步来看，agent上报到svr延迟较大，应是大量数据上报超时堆积导致，每次agent上报超时，都会等待20s</p><p>2.20 延迟进一步加剧，大约有10+对账，处于延迟边缘，引发大量延迟事件</p><p>2.22 下午，发布新版本（增加耗时日志打印），延迟进一步加大，到5点逐渐扩展到2h<br>管理员收到大量告警，agent等待svr处理超过20s</p><p>2.22 晚上，发布多个版本，修改数据库线程池大小，增加超时时间设置，延迟降低，出现漏对事件</p><p>2.23 早上，延迟再次增加，且出现大量漏对事件，数据库备机压力大，dba增加索引，svr修改线程池，调整超时时间，延迟逐渐减少，漏对逐渐减少</p><p>BasicDataSource 改为 HiKariDataSource<br>HikariCP是一个轻量级的十分快速的JDBC连接池框架。<br>使用了以下这些技术</p><ul><li>字节级别的工程技术</li><li>微观层面的优化</li><li>集合框架的智能使用<br>demo<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">HikariConfig config &#x3D; new HikariConfig();</span><br><span class="line">HikariDataSource ds;</span><br><span class="line"></span><br><span class="line">config.setJdbcUrl(&quot;jdbc_url&quot;);</span><br><span class="line">config.setUsername(&quot;xxx&quot;);</span><br><span class="line">config.setPassword(&quot;xxx&quot;);</span><br><span class="line">config.addDataSourceProperty(&quot;cachePrepStms&quot;, &quot;true&quot;);</span><br><span class="line">config.addDataSourceProperty(&quot;prepStmtCacheSize&quot;, &quot;250&quot;);</span><br><span class="line">config.addDataSourceProperty(&quot;prepStmtCacheSqlLimit&quot;, &quot;2048&quot;);</span><br><span class="line">ds &#x3D; new HikariDataSource(config);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><p>HikariConfig 配置类，初始化数据源<br>HikariCP可以检测到连接泄漏</p><p>索引增加字段（索引机制还是挺复杂的，有时间需要好好研究）<br>跟数据量，数据过滤比例，排序都有关系</p><ol><li>返回数据比例&gt;30%，不使用索引</li><li>where 和 order条件，先where后order</li><li>没有过滤效果的条件，可以不建立索引</li><li>时间段查询，&gt;= &amp;&amp; &lt;= 索引效果没有=效果好</li><li>like索引效果，没有in效果好</li></ol><p>2.24 下午，上报处理逻辑优化，尽量减少查询次数，减少排序，悲观锁改为乐观锁</p><p>后续，出现数次safe status更新失败告警，部分数据量大的表耗时偶尔较长，部分对账同时间上报多条数据，待优化<br><img src="/2021/02/25/safe_delay/update_safe_status_fail.png"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;2.19 开始有业务反馈神盾出现延迟(shuangchen)&lt;br&gt;&lt;img src=&quot;/2021/02/25/safe_delay/shuangchen_1.jpg&quot;&gt;&lt;/p&gt;
&lt;p&gt;初步来看，agent上报到svr延迟较大，应是大量数据上报超时堆积导致，每次agent上</summary>
      
    
    
    
    <category term="safe" scheme="http://example.com/categories/safe/"/>
    
    
    <category term="safe" scheme="http://example.com/tags/safe/"/>
    
  </entry>
  
</feed>
